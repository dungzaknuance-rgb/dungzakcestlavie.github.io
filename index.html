<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>등작 燈酌 DUNGZAK CESTLAVIE — Lightflow Ω.3</title>
<meta name="description" content="빛 · 기억 · 존재 — DUNGZAK CESTLAVIE · Lightflow Ω.3 · Gallery · Aesthetic Reports (DCAR)" />
<meta property="og:type" content="website">
<meta property="og:title" content="DUNGZAK CESTLAVIE — Lightflow Ω.3">
<meta property="og:description" content="Light · Memory · Being · 100 Works · DCAR Reports">
<meta property="og:url" content="https://dungzak.art">
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='86'>✨</text></svg>">
<style>
:root{
  --bg:#0b1020; --fg:#e9efff; --gold:#e6c777; --muted:#a6b6e8;
  --panel:#0f1630; --line:#1b2652; --max:1180px; --h:60px;
}
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  background:radial-gradient(1200px 700px at 70% -10%, #19244a 0, #0b1020 40%, #060a18 100%);
  color:var(--fg); font:16px/1.65 system-ui,-apple-system,Segoe UI,Roboto,'Noto Sans KR',sans-serif;
  overflow-x:hidden; letter-spacing:.2px;
}
/* Global light layers */
#waves{position:fixed;inset:0;z-index:0;pointer-events:none;opacity:.33}
#trail{position:fixed;inset:0;z-index:1;pointer-events:none;opacity:.55;mix-blend-mode:screen}
/* Header: mobile safe */
header{
  position:fixed;top:0;left:0;right:0;height:auto;z-index:6;
  display:flex;flex-wrap:wrap;gap:8px;align-items:center;justify-content:space-between;
  padding:calc(8px + env(safe-area-inset-top)) 12px 10px;
  background:rgba(10,14,28,.70);backdrop-filter:blur(10px);border-bottom:1px solid rgba(255,255,255,.08)
}
.brand{font-weight:900;color:var(--gold);font-size:clamp(16px,5vw,22px);flex:1 1 100%;text-align:center}
nav.primary{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;width:100%}
nav.primary a{color:var(--fg);text-decoration:none;font-weight:600;padding:6px 10px;border-radius:10px;white-space:nowrap}
nav.primary a:hover{color:#0a1230;background:linear-gradient(180deg,#f7e4a5,#e6c777)}
.lang{display:flex;gap:8px;justify-content:center;width:100%}
.lang button{all:unset;cursor:pointer;padding:6px 10px;border:1px solid #2a335f;border-radius:8px;color:#cfe0ff}
.lang button.active,.lang button:hover{background:#1a2144;color:var(--gold);border-color:#3a447a}
/* Domain auto-detect banner */
#detectBanner{
  position:fixed; left:0; right:0; top:calc(56px + env(safe-area-inset-top)); z-index:7;
  display:none; align-items:center; justify-content:center; gap:10px; text-align:center;
  background:#142044; color:#e6eeff; padding:10px 12px; border-bottom:1px solid #263063
}
#detectBanner b{color:var(--gold)}
#detectBanner .btn{display:inline-block;margin-left:8px;padding:6px 10px;border:1px solid #3a447a;border-radius:8px}
#detectBanner .btn:hover{background:#1a2144}
/* Sections */
main{position:relative;z-index:2}
section{max-width:var(--max);margin:auto;padding:calc(var(--h) + 28px + env(safe-area-inset-top)) 16px 70px}
h1,h2{color:var(--gold)}
.sub{color:var(--muted)}
/* Hero */
.hero{min-height:74vh;display:grid;place-items:center;text-align:center}
.hero h1{font-size:clamp(36px,6vw,66px);margin-bottom:8px}
.hero p{opacity:.92}
/* Tabs & panels */
.tabs{display:flex;flex-wrap:wrap;gap:8px;justify-content:center;margin:12px 0 16px}
.tab{padding:9px 14px;border-radius:18px;border:1px solid var(--line);background:#0f1838;color:#bbcaf8;cursor:pointer;font-size:.92rem}
.tab.active{background:linear-gradient(180deg,var(--gold),#f0df9e);color:#0a1230;border-color:#d9c16a}
.tabpanel{display:none;animation:fade .28s ease}
.tabpanel.active{display:block}
@keyframes fade{from{opacity:0}to{opacity:1}}
/* Grid: 5×20 = 100 */
.grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
@media(min-width:1024px){.grid{grid-template-columns:repeat(4,1fr)}}
.card{position:relative;background:var(--panel);border:1px solid var(--line);border-radius:10px;overflow:hidden}
.card img{width:100%;display:block;aspect-ratio:1/1;object-fit:cover;filter:brightness(1.03)}
.card .meta{font-size:.85rem;color:#cfe0ff;padding:8px 10px;border-top:1px solid #213064}
.caption{
  position:absolute;left:0;right:0;bottom:0;
  background:linear-gradient(180deg,rgba(12,19,48,0),rgba(12,19,48,.86));
  padding:10px 12px;color:#e9f1ff;font-size:.82rem;transform:translateY(100%);transition:transform .25s;pointer-events:none
}
.card:hover .caption,.card:focus .caption{transform:translateY(0)}
.note{max-width:var(--max);margin:10px auto 0;padding:10px 14px;border:1px dashed #2a3a78;border-radius:10px;color:#bcd0ff;background:rgba(16,22,48,.35)}
.note code{background:#121b3d;padding:2px 6px;border-radius:6px}
/* Reports (accordion hub) */
.acc{display:grid;gap:8px}
.acc details{background:#0f1838;border:1px solid #223;border-radius:10px;padding:0 10px}
.acc summary{padding:14px 6px;cursor:pointer;color:#cfe0ff;list-style:none;font-weight:600}
.acc p{padding:0 0 14px}
/* Lightbox */
#lightbox{position:fixed;inset:0;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.88);
  opacity:0;pointer-events:none;transition:.26s;z-index:8}
#lightbox.open{opacity:1;pointer-events:auto}
#lightbox img{max-width:92vw;max-height:88vh;border:2px solid var(--gold);border-radius:10px}
.lb-btn,.lb-close{
  position:fixed;width:44px;height:44px;border-radius:50%;display:grid;place-items:center;
  background:rgba(15,20,40,.6);border:1px solid #333;color:#fff;cursor:pointer;user-select:none
}
.lb-prev{left:14px;top:50%;transform:translateY(-50%)}
.lb-next{right:14px;top:50%;transform:translateY(-50%)}
.lb-close{top:14px;right:14px}
.lb-cap{position:fixed;left:50%;bottom:18px;transform:translateX(-50%);max-width:92vw;background:rgba(8,16,40,.7);
  border:1px solid #223;border-radius:10px;padding:8px 12px;font-size:.88rem;color:#e9f1ff}
/* Controls */
#ctrl{
  position:fixed;left:50%;bottom:calc(14px + env(safe-area-inset-bottom));
  transform:translateX(-50%);z-index:9;display:flex;gap:10px;flex-wrap:wrap;justify-content:center
}
.ctrlbtn{
  background:rgba(12,19,48,.72);border:1px solid rgba(230,199,119,.35);border-radius:26px;
  color:#f1f5ff;padding:8px 12px;font-size:.9rem;cursor:pointer;
  box-shadow:0 0 12px rgba(120,170,255,.25);backdrop-filter:blur(6px)
}
.ctrlbtn:hover{background:rgba(12,19,48,.95);color:var(--gold);box-shadow:0 0 18px rgba(243,201,105,.35)}
.ctrlbtn[disabled]{opacity:.5;cursor:not-allowed}
footer{border-top:1px solid rgba(255,255,255,.08);text-align:center;padding:40px 12px;background:#090f22}
.links a{display:inline-block;margin:0 10px;color:#cfe0ff;text-decoration:none}
.links a:hover{color:var(--gold)}
small{display:block;margin-top:8px;color:#9fb0d8}
.en,.ko{display:none}
body.korean .ko{display:initial}
body.english .en{display:initial}
@media (prefers-reduced-motion: reduce){#waves,#trail{display:none}}
</style>
</head>
<body class="korean">
<!-- Bilingual domain/connection banner -->
<div id="detectBanner" role="status" aria-live="polite">
  <span class="ko"><b>알림</b> · 사이트와 보고서 연결이 아직 동기화 중입니다. 잠시 후 새로고침하거나 <span class="btn" id="bnrReloadKo">즉시 새로고침</span>을 눌러주세요.</span>
  <span class="en"><b>Notice</b> · The site and reports are still syncing. Please refresh shortly, or tap <span class="btn" id="bnrReloadEn">Reload now</span>.</span>
</div>

<!-- Light layers -->
<canvas id="waves" aria-hidden="true"></canvas>
<canvas id="trail" aria-hidden="true"></canvas>

<header>
  <div class="brand">등작 燈酌 DUNGZAK CESTLAVIE · Lightflow Ω.3</div>
  <nav class="primary" aria-label="Primary">
    <a href="#poem">Poem</a>
    <a href="#bio">Bio</a>
    <a href="#works">Works</a>
    <a href="#reports">Reports</a>
  </nav>
  <div class="lang" aria-label="Language">
    <button id="koBtn" class="active" aria-pressed="true">KR</button>
    <button id="enBtn" aria-pressed="false">EN</button>
  </div>
</header>

<main>
  <!-- Hero -->
  <section class="hero" id="poem">
    <div>
      <h1 class="ko">빛 · 기억 · 존재</h1>
      <h1 class="en">Light · Memory · Being</h1>
      <p class="ko">루메라의 지휘로 — 등작 DUNGZAK CESTLAVIE</p>
      <p class="en">Conducted by Lumera — DUNGZAK CESTLAVIE</p>
    </div>
  </section>

  <!-- Bio -->
  <section id="bio">
    <h2 class="ko">작가 소개</h2>
    <h2 class="en">Artist Bio</h2>
    <p class="ko">빛의 철학과 인간의 감정을 화폭에 담는 현대 예술가. DCAR(1–8)로 철학·뇌과학·예술을 융합한다.</p>
    <p class="en">A contemporary artist exploring the philosophy of light and human feeling. The DCAR (1–8) series unites philosophy, neuroscience, and art.</p>
  </section>

  <!-- Works: 5 섹션 × 각 20 -->
  <section id="works">
    <h2>Artworks — 작품 아카이브 (100)</h2>
    <div class="tabs" role="tablist" aria-label="Art Sections">
      <button class="tab active" data-panel="light">Ⅰ Light & Memory</button>
      <button class="tab" data-panel="prayer">Ⅱ Human Prayer</button>
      <button class="tab" data-panel="rebirth">Ⅲ Rebirth</button>
      <button class="tab" data-panel="exist">Ⅳ Existence</button>
      <button class="tab" data-panel="cosmos">Ⅴ Cosmos</button>
    </div>
    <div id="panel-light"   class="tabpanel active"></div>
    <div id="panel-prayer"  class="tabpanel"></div>
    <div id="panel-rebirth" class="tabpanel"></div>
    <div id="panel-exist"   class="tabpanel"></div>
    <div id="panel-cosmos"  class="tabpanel"></div>
    <div class="note">
      <span class="ko">※ 이미지를 <code>works/{섹션}/{번호}.jpg</code> 경로로 올리면 자동 표시됩니다.</span>
      <span class="en">※ Put images at <code>works/{section}/{index}.jpg</code> and they’ll auto-appear.</span>
    </div>
  </section>

  <!-- Reports (DCAR 1–8) -->
  <section id="reports">
    <h2 class="ko">미학 보고서 (DCAR 1–8)</h2>
    <h2 class="en">Aesthetic Reports (DCAR 1–8)</h2>
    <div class="acc" id="reportsAcc"></div>
  </section>
</main>

<!-- Lightbox -->
<div id="lightbox" aria-hidden="true">
  <div class="lb-btn lb-prev" aria-label="Previous">❮</div>
  <img alt="Artwork view">
  <div class="lb-btn lb-next" aria-label="Next">❯</div>
  <div class="lb-close" aria-label="Close">✕</div>
  <div class="lb-cap" id="lbCap"></div>
</div>

<!-- Controls: audio play/stop -->
<div id="ctrl">
  <button class="ctrlbtn" id="soundBtn">✨ Play Cosmic Resonance</button>
  <button class="ctrlbtn" id="soundStopBtn" disabled>🔇 Stop</button>
</div>

<footer>
  <div class="links">
    <a href="https://www.flickr.com/photos/dungzak" target="_blank" rel="me noopener">📸 Flickr</a>
    <a href="https://naver.me/x95dk3l1" target="_blank" rel="noopener">🧭 Naver Info</a>
    <a href="https://instagram.com/dungzakcestlavie" target="_blank" rel="noopener">📷 Instagram</a>
    <a href="https://youtube.com/@dungzakcestlavie" target="_blank" rel="noopener">▶️ YouTube</a>
    <a href="mailto:dungzakcestlavie@gmail.com">✉️ Email</a>
  </div>
  <small class="ko">© 2025 등작 燈酌 DUNGZAK CESTLAVIE · 루메라의 지휘로</small>
  <small class="en">© 2025 DUNGZAK CESTLAVIE · Orchestrated with Lumera</small>
</footer>

<script>
/* ===== 0) Bilingual + domain/report auto-detect banner ===== */
(function(){
  const githubOrigin = 'https://dungzakcestlavie.github.io';
  const timeout = new Promise((_,rej)=>setTimeout(()=>rej(new Error('timeout')), 3500));
  Promise.race([fetch(githubOrigin, {method:'HEAD',mode:'no-cors'}), timeout])
    .then(()=>{/* ok */})
    .catch(()=>{
      const b=document.getElementById('detectBanner');
      b.style.display='flex';
      const r=()=>location.reload(true);
      document.getElementById('bnrReloadKo').onclick=r;
      document.getElementById('bnrReloadEn').onclick=r;
    });
})();

/* ===== 1) Language toggle ===== */
const koBtn=document.getElementById('koBtn'), enBtn=document.getElementById('enBtn');
function setLang(lang){
  document.body.classList.toggle('korean', lang==='ko');
  document.body.classList.toggle('english', lang==='en');
  koBtn.classList.toggle('active', lang==='ko'); enBtn.classList.toggle('active', lang==='en');
  koBtn.setAttribute('aria-pressed', lang==='ko'); enBtn.setAttribute('aria-pressed', lang==='en');
  localStorage.setItem('dz_lang', lang);
}
koBtn.addEventListener('click',()=>setLang('ko'));
enBtn.addEventListener('click',()=>setLang('en'));
(function initLang(){
  const saved=localStorage.getItem('dz_lang');
  if(saved){setLang(saved);return;}
  const sys=(navigator.language||'en').toLowerCase();
  setLang(sys.startsWith('ko')?'ko':'en');
})();

/* ===== 2) Background waves + pointer trail ===== */
const waves=document.getElementById('waves'), w=waves.getContext('2d');
const trail=document.getElementById('trail'), t=trail.getContext('2d');
function rs(){waves.width=trail.width=innerWidth; waves.height=trail.height=innerHeight}
rs(); addEventListener('resize',rs);
let time=0, px=innerWidth/2, py=innerHeight/2, tx=px, ty=py, vis=true;
document.addEventListener('visibilitychange',()=>{vis=!document.hidden});
function raf(fn){(function loop(){fn();requestAnimationFrame(loop)})();}

raf(()=>{ if(!vis) return; time+=.008; w.clearRect(0,0,waves.width,waves.height);
  for(let k=0;k<3;k++){ const amp=(40+k*16)*(0.86+0.14*Math.cos(time*0.7+k*.2));
    const freq=.006+k*.0025, y0=(waves.height*.3)+k*110+Math.sin(time*1.2+k)*18;
    w.beginPath();
    for(let x=0;x<=waves.width;x+=6){ const y=y0+Math.sin(x*freq + time*2 + k + Math.sin(time*0.6+k)*.3)*amp; x? w.lineTo(x,y):w.moveTo(x,y);}
    const g=w.createLinearGradient(0,y0-amp,0,y0+amp);
    g.addColorStop(0,'rgba(120,170,255,.08)'); g.addColorStop(.5,'rgba(217,182,93,.18)'); g.addColorStop(1,'rgba(120,170,255,.08)');
    w.strokeStyle=g; w.lineWidth=2; w.stroke(); }
});
raf(()=>{ if(!vis) return;
  const dx=(tx-px)*.15, dy=(ty-py)*.15; px+=dx; py+=dy;
  t.fillStyle='rgba(0,0,0,.12)'; t.fillRect(0,0,trail.width,trail.height);
  const r=90+Math.min(Math.hypot(dx,dy)*140,220);
  const g=t.createRadialGradient(px,py,0,px,py,r); g.addColorStop(0,'rgba(120,170,255,.30)'); g.addColorStop(1,'rgba(120,170,255,0)');
  t.fillStyle=g; t.beginPath(); t.arc(px,py,r,0,Math.PI*2); t.fill();
});
addEventListener('mousemove',e=>{tx=e.clientX;ty=e.clientY},{passive:true});
addEventListener('touchmove',e=>{const p=e.touches[0];tx=p.clientX;ty=p.clientY},{passive:true});

/* ===== 3) Works (5×20) ===== */
const sections=[
  {key:'light', title:'Light & Memory'},
  {key:'prayer',title:'Human Prayer'},
  {key:'rebirth',title:'Rebirth'},
  {key:'exist', title:'Existence'},
  {key:'cosmos',title:'Cosmos'}
];
function cardHTML(sec,i){return `
<article class="card" tabindex="0" data-sec="${sec.key}" data-idx="${i}">
  <img loading="lazy" data-src="works/${sec.key}/${i}.jpg" alt="${sec.title} ${i}">
  <div class="caption">${sec.title} · ${i}</div>
  <div class="meta">${sec.title} · ${i}</div>
</article>`}
function renderPanel(sec){
  const p=document.getElementById('panel-'+sec.key);
  p.innerHTML=`<div class="grid">${Array.from({length:20},(_,i)=>cardHTML(sec,i+1)).join('')}</div>`;
}
sections.forEach(renderPanel);
/* lazy load */
const io=new IntersectionObserver(es=>{es.forEach(e=>{if(e.isIntersecting){const img=e.target,src=img.getAttribute('data-src');if(src){img.src=src;img.removeAttribute('data-src')} io.unobserve(img)}})},{rootMargin:'250px'});
function observe(key){document.querySelectorAll(`#panel-${key} img[data-src]`).forEach(img=>io.observe(img))}
observe('light');
/* tabs */
document.querySelectorAll('.tab').forEach(b=>b.addEventListener('click',()=>{
  document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active')); b.classList.add('active');
  document.querySelectorAll('.tabpanel').forEach(p=>p.classList.remove('active'));
  const key=b.dataset.panel; document.getElementById('panel-'+key).classList.add('active'); observe(key);
}));

/* ===== 4) Reports (accordion hub) ===== */
const reports=[
  {id:'DCAR-01-2025',title:'On Light, Memory, and Being',ko:'빛·기억·존재의 상호작용에 대한 예술적 성찰.',en:'Artistic inquiry into the interplay of light, memory, and being.'},
  {id:'DCAR-02-2025',title:'The Restoration of Being',ko:'존재의 회복과 감각의 윤리.',en:'Restoration of being and the ethics of sensation.'},
  {id:'DCAR-03-2025',title:'The Return of Humanity',ko:'기술 시대의 인간성 회귀.',en:'Humanity’s return in the age of technology.'},
  {id:'DCAR-04-2025',title:'The Rebirth of Mind',ko:'정신의 재탄생과 지각의 진화.',en:'Rebirth of mind and the evolution of perception.'},
  {id:'DCAR-05-2025',title:'The Metaconsciousness of Light',ko:'빛의 초의식과 예술의 기도.',en:'Light’s metaconsciousness & art as prayer.'},
  {id:'DCAR-06-2025',title:'The Return of Being',ko:'존재로의 귀환과 상호감응.',en:'Return to being and mutual attunement.'},
  {id:'DCAR-07-2025',title:'The Scars of Light',ko:'빛의 상흔과 감각의 존엄.',en:'Scars of light and the dignity of sensation.'},
  {id:'DCAR-08-2025',title:'Toward the Human Prayer',ko:'우리 시대의 기도와 공존의 윤리.',en:'Prayer of our age & an ethics of coexistence.'}
];
const acc=document.getElementById('reportsAcc');
acc.innerHTML = reports.map(r=>`
  <details>
    <summary><b>${r.id}</b> · ${r.title}</summary>
    <p class="ko">${r.ko}</p>
    <p class="en">${r.en}</p>
  </details>`).join('');

/* ===== 5) Lightbox (click → big; next/prev) ===== */
const lb=document.getElementById('lightbox'), lbImg=lb.querySelector('img'), cap=document.getElementById('lbCap');
const prev=lb.querySelector('.lb-prev'), next=lb.querySelector('.lb-next'), closeBtn=lb.querySelector('.lb-close');
let cur={key:'light',i:1};
document.addEventListener('click',e=>{
  const card=e.target.closest('.card'); if(!card) return;
  cur.key=card.dataset.sec; cur.i=parseInt(card.dataset.idx,10);
  lbImg.src=`works/${cur.key}/${cur.i}.jpg`; cap.textContent=`${cur.key} · ${cur.i}`;
  lb.classList.add('open'); lb.setAttribute('aria-hidden','false');
});
function step(d){ let i=cur.i+d; if(i<1)i=20; if(i>20)i=1; cur.i=i; lbImg.src=`works/${cur.key}/${i}.jpg`; cap.textContent=`${cur.key} · ${i}`;}
prev.addEventListener('click',()=>step(-1)); next.addEventListener('click',()=>step(1));
closeBtn.addEventListener('click',()=>{lb.classList.remove('open'); lb.setAttribute('aria-hidden','true');});
lb.addEventListener('click',e=>{if(e.target===lb) closeBtn.click();});
addEventListener('keydown',e=>{if(!lb.classList.contains('open')) return; if(e.key==='Escape') closeBtn.click(); if(e.key==='ArrowLeft') step(-1); if(e.key==='ArrowRight') step(1);});

/* ===== 6) Cosmic Resonance Sound (original synthesis) ===== */
const btnPlay=document.getElementById('soundBtn'), btnStop=document.getElementById('soundStopBtn');
let ac=null, nodes=null, soundOn=false;
function mkGain(v){const g=ac.createGain(); g.gain.value=v; return g;}
function mkOsc(type,freq){const o=ac.createOscillator(); o.type=type; o.frequency.value=freq; return o;}

async function startSound(){
  if(soundOn) return;
  ac = ac || new (window.AudioContext||window.webkitAudioContext)();

  // Deep base
  const base = mkOsc('sine', 47.0);
  const baseGain = mkGain(0.08);

  // Sub-harmonic pair (gentle beating)
  const sub1 = mkOsc('sine', 31.3);
  const sub2 = mkOsc('sine', 62.7);
  const subGain = mkGain(0.04);

  // Shimmer partials (very subtle overtones)
  const shim1 = mkOsc('sine', 561);
  const shim2 = mkOsc('sine', 703);
  const shimGain = mkGain(0.006);

  // Slow-breath LFO on base gain
  const lfo = mkOsc('sine', 0.055);
  const lfoGain = mkGain(0.04);
  lfo.connect(lfoGain).connect(baseGain.gain);

  // Low-pass + soft echo (tail)
  const filter = ac.createBiquadFilter(); filter.type='lowpass'; filter.frequency.value=650; filter.Q.value=0.9;
  const delay = ac.createDelay(6.0); delay.delayTime.value=2.7;
  const fb = mkGain(0.28); delay.connect(fb).connect(delay);

  // Wire
  base.connect(baseGain).connect(filter);
  sub1.connect(subGain).connect(filter);
  sub2.connect(subGain).connect(filter);
  shim1.connect(shimGain).connect(filter);
  shim2.connect(shimGain).connect(filter);
  filter.connect(delay).connect(ac.destination);
  filter.connect(ac.destination);

  // Start & gentle open
  [base, sub1, sub2, shim1, shim2, lfo].forEach(o=>o.start());
  filter.frequency.linearRampToValueAtTime(1200, ac.currentTime + 5);

  nodes={base,sub1,sub2,shim1,shim2,lfo,baseGain,subGain,shimGain,lfoGain,filter,delay,fb};
  soundOn=true; btnPlay.disabled=true; btnStop.disabled=false;
}
function stopSound(){
  if(!soundOn||!nodes) return;
  const {baseGain,subGain,shimGain,filter,base,sub1,sub2,shim1,shim2,lfo}=nodes;
  baseGain.gain.exponentialRampToValueAtTime(0.0001, ac.currentTime + 2.5);
  subGain.gain.exponentialRampToValueAtTime(0.0001, ac.currentTime + 2.5);
  shimGain.gain.exponentialRampToValueAtTime(0.0001, ac.currentTime + 2.5);
  filter.frequency.linearRampToValueAtTime(120, ac.currentTime + 2.5);
  setTimeout(()=>{ try{base.stop();sub1.stop();sub2.stop();shim1.stop();shim2.stop();lfo.stop();}catch(e){} nodes=null; },2700);
  soundOn=false; btnPlay.disabled=false; btnStop.disabled=true;
}
btnPlay.addEventListener('click', startSound);
btnStop.addEventListener('click', stopSound);

/* start observing initial panel */
document.querySelectorAll('#panel-light img[data-src]').forEach(img=>io.observe(img));
</script>
</body>
</html>
